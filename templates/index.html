{% extends "base.html" %}

{% block title %}חיפוש - גניזת קהיר{% endblock %}

{% block content %}
<div class="search-page">
    <h1>חיפוש תעתיקי גניזת קהיר</h1>

    {% if error %}
    <div class="error-message">
        <strong>שגיאה:</strong> {{ error }}
    </div>
    {% endif %}

    <form action="/search" method="GET" class="search-form">
        <div class="form-group">
            <input
                type="text"
                name="q"
                placeholder="הזן שאילתת חיפוש (למשל: שבת, מעשרות, או מזהה מסמך)"
                class="search-input"
                autofocus
                required
            >
        </div>

        <div class="search-options">
            <div class="form-row">
                <div class="form-group">
                    <label for="type">סוג חיפוש:</label>
                    <select name="type" id="type" class="select-input">
                        <option value="fulltext">חיפוש טקסט מלא</option>
                        <option value="docid">מזהה מסמך</option>
                        <option value="regex">ביטוי רגולרי</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="limit">מגבלת תוצאות:</label>
                    <select name="limit" id="limit" class="select-input">
                        <option value="10" selected>10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                </div>
            </div>

            <details class="advanced-options">
                <summary>מסננים מתקדמים</summary>

                <div class="form-row">
                    <div class="form-group">
                        <label for="annotations">הערות:</label>
                        <select name="annotations" id="annotations" class="select-input">
                            <option value="">הכל</option>
                            <option value="yes">עם הערות</option>
                            <option value="no">ללא הערות</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="min_lines">מינימום שורות:</label>
                        <input type="number" name="min_lines" id="min_lines" min="1" class="number-input">
                    </div>

                    <div class="form-group">
                        <label for="max_lines">מקסימום שורות:</label>
                        <input type="number" name="max_lines" id="max_lines" min="1" class="number-input">
                    </div>
                </div>
            </details>
        </div>

        <button type="submit" class="btn btn-primary">חפש</button>
    </form>

    <div class="help-section">
        <h3>דוגמאות חיפוש:</h3>
        <ul>
            <li><strong>טקסט מלא:</strong> שבת, חלה, מעשרות (ניתן להשתמש באופרטורים בוליאניים: שבת AND חלה, כן OR לא)</li>
            <li><strong>מזהה מסמך:</strong> IE104549337 </li>
            <li><strong>ביטוי רגולרי:</strong> ^מ.*$ למציאת מילים המתחילות באות מ, או ש\w+ת למציאת מילים שמתחילות בש׳ ומסתיימות בת׳ </li>
        </ul>
    </div>

    <div class="credits-section">
        <h3>אודות כלי החיפוש</h3>
        <p>
            זהו <strong>כלי חיפוש דמו לא רשמי</strong> שפותח על ידי             לצורך גישה נוחה ומהירה למאגר הנתונים של פרויקט
            <a href="https://zenodo.org/records/17734473" target="_blank" rel="noopener">MiDRASH</a>.
        </p>

        <h4>אודות מאגר הנתונים</h4>
        <p>
            מאגר הנתונים מכיל תעתיקים אוטומטיים של פרגמנטים גניזת קהיר מהספרייה הלאומית של ישראל.
            <strong>כל הזכויות על מאגר הנתונים והמודלים לתעתיקים שייכים לפרויקט MiDRASH.</strong>
        </p>

        <p>
            <strong>הערה:</strong> התעתיקים הם אוטומטיים וכוללים שגיאות בפילוח ובזיהוי הטקסט.
            למרות זאת, הם בעלי ערך רב למחקר גם בצורתם הנוכחית.
            לחיפוש קטע לפי מספר 99, השתמש ב-<a href="https://www.ktiv.org" target="_blank" rel="noopener">KTIV</a>.
        </p>

        <h4>קישורים ויצירת קשר</h4>
        <div class="links">
            <p>
                <a href="https://zenodo.org/records/17734473" target="_blank" rel="noopener" class="btn btn-secondary">
                    מאגר הנתונים המלא ב-Zenodo
                </a>
            </p>
            <p>
                ליצירת קשר: yanirmr בג'ימייל</a>
            </p>
        </div>
    </div>
</div>
{% endblock %}
